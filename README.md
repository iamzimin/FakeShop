# FakeShop

Стек: Kotlin, Clean Architecture, Jetpack Compose, Coroutine, Retrofit, Gson, Room, Dagger Hilt, MVVM, Jetpack Navigation, JUnit.

## Инструкция по запуску
- [Скачать apk](https://github.com/iamzimin/FakeShop/releases/latest) файл и установить.

#

Функционал приложения:
1. **Регистрация:** Экран с полями ввода имени, e-mail, пароля и его подтверждения. Валидация полей и отправка POST запроса. При успешной регистрации — переход на экран входа.

2. **Вход:** Экран с полями e-mail и пароля. POST запрос для входа, сохранение токена, автологин при повторных запусках приложения. Переход на список продукции при успешном входе.

3. **Список продукции:** Получение и отображение списка товаров с фильтрацией по цене и категориям с пагинацией(с изменением лимита загрузки). Кэширование и работа приложения в оффлайн режиме. Обработка ошибок запросов.

4. **Экран продукта:** Подробная информация о продукте (фото, цена, название, категория, описание). Обработка отсутствующих данных и изображений.

#

Проблемы:
1. Сортировка по возростанию/убыванию. При сортировке по полю price нарушается последовательность, так как в некоторых объявлениях основаня цена указана с учётом скидки.
Пытался решить путём сортировки по полю "discounted_price", но в таком случае появляются дубликаты объявлений
Например, _id 64d7e7d7e03347cdf0b576bd появляется дважды
[по запросу №1](https://fakeshopapi-l2ng.onrender.com/app/v1/products?page=1&limit=10&sort=discounted_price) и
[по запросу №2](https://fakeshopapi-l2ng.onrender.com/app/v1/products?page=2&limit=10&sort=discounted_price)

Итог: сортировал по полю price.

2. Не получилось отправлять token в header запроса /users/auth/login при последующих входах в приложение,
так как при отправке [GET запроса](http://fake-shop-api.ap-south-1.elasticbeanstalk.com/app/v1/users/auth/login) с токеном возникает ошибка 404.
[Пример из документации](https://fake-shopapi.netlify.app/docs/auth#getProfile).

Итог: Возможность проверки токена реализовал в соответствии с заданием (если запрос выполнен, то происходит переход к экрану списка продукции, иначе переход на экран логина), но закоментировал.


